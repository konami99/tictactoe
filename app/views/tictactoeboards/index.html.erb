<!DOCTYPE html>
<html>
<head>
	<style>
		.board {
			display: grid;
			grid-template-columns: repeat(3, 1fr);
			grid-template-rows: repeat(3, 1fr);
			gap: 10px;
			width: 300px;
			height: 300px;
		}

		.cell {
			display: flex;
			justify-content: center;
			align-items: center;
			font-size: 48px;
			background-color: #ffffff;
			border: 1px solid #000000;
			cursor: pointer;
		}

		.circle::after {
			content: "O";
		}

		.cross::after {
			content: "X";
		}
	</style>
</head>
<body>
	<%= turbo_stream_from "tictoctoeboards" %>
	<%= turbo_frame_tag @tictactoeboard do %>
		<div class="board" data-controller="tictactoe">
			<div class="cell <% if @tictactoeboard.cell_1 == 'circle' %>circle<% elsif @tictactoeboard.cell_1 == 'cross' %>cross<% end %>" data-action="click->tictactoe#click"></div>
			<div class="cell <% if @tictactoeboard.cell_2 == 'circle' %>circle<% elsif @tictactoeboard.cell_2 == 'cross' %>cross<% end %>" data-action="click->tictactoe#click"></div>
			<div class="cell <% if @tictactoeboard.cell_3 == 'circle' %>circle<% elsif @tictactoeboard.cell_3 == 'cross' %>cross<% end %>" data-action="click->tictactoe#click"></div>
			<div class="cell <% if @tictactoeboard.cell_4 == 'circle' %>circle<% elsif @tictactoeboard.cell_4 == 'cross' %>cross<% end %>" data-action="click->tictactoe#click"></div>
			<div class="cell <% if @tictactoeboard.cell_5 == 'circle' %>circle<% elsif @tictactoeboard.cell_5 == 'cross' %>cross<% end %>" data-action="click->tictactoe#click"></div>
			<div class="cell <% if @tictactoeboard.cell_6 == 'circle' %>circle<% elsif @tictactoeboard.cell_6 == 'cross' %>cross<% end %>" data-action="click->tictactoe#click"></div>
			<div class="cell <% if @tictactoeboard.cell_7 == 'circle' %>circle<% elsif @tictactoeboard.cell_7 == 'cross' %>cross<% end %>" data-action="click->tictactoe#click"></div>
			<div class="cell <% if @tictactoeboard.cell_8 == 'circle' %>circle<% elsif @tictactoeboard.cell_8 == 'cross' %>cross<% end %>" data-action="click->tictactoe#click"></div>
			<div class="cell <% if @tictactoeboard.cell_9 == 'circle' %>circle<% elsif @tictactoeboard.cell_9 == 'cross' %>cross<% end %>" data-action="click->tictactoe#click"></div>
		</div>
	<% end %>
	<script>
		// Get all the cells
		const cells = document.querySelectorAll('.cell');

		// Variable to keep track of the current player
		let currentPlayer = 'circle';

		// Function to handle cell click event
		function handleCellClick(event) {
			const cell = event.target;

			// Check if the cell is already marked
			if (cell.classList.contains('circle') || cell.classList.contains('cross')) {
				return;
			}

			// Set the appropriate class based on the current player
			cell.classList.add(currentPlayer);

			// Toggle the current player
			currentPlayer = (currentPlayer === 'circle') ? 'cross' : 'circle';
		}

		// Add click event listener to each cell
		cells.forEach(cell => {
			//cell.addEventListener('click', handleCellClick);
		});
	</script>
</body>
</html>
